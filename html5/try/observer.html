<!doctype html>
<html>
    <head>
        <title>mass Framework</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        <script type="text/javascript" src="public/js/zepto.js"></script>
    </head>
    <body>
        <input value="aaa" na="a" nb="b" nc="c">
        <script>
            window.onload = function(){
                var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
                
                var list = document.querySelector('input');
                
                
                var observer = new MutationObserver(function(datas) {
                    datas.forEach(function(data) {
                        console.log(data.type);
                        console.log(data.target);
                        console.log(data.target.value);
                    });
                });

                observer.observe(list,{
                    attributes: true,             //属性的变动
                    childList: true,              //子元素的变动
                    characterData: true,          //节点内容或节点文本的变动
                    subtree:false,                //所有下属节点的变动

                    attributeOldValue :true,      //是否需要记录变动前的属性
                    attributeFilter:["value"]     //只监听value属性,提高性能
                });
                

                list.addEventListener('change',function(e){
                    console.log(e);
                })
                $(list).val('hello world!');
                $(list).val('hi world!');
                $(list).val('haha');
            }
        </script>
    </body>
</html>
